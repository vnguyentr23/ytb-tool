<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TTS & Video Sync App</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <header>
      <h1>ğŸ™ï¸ Text-to-Speech & Video Synchronization</h1>
      <p>Create TTS for sentences and synchronize videos with audio</p>
    </header>

    <div class="tabs">
      <button class="tab-button active" onclick="switchTab('tts-genai')">ğŸ“ TTS GENAI</button>
      <button class="tab-button" onclick="switchTab('tts-ai33')">ğŸ™ï¸ TTS AI33</button>
      <button class="tab-button" onclick="switchTab('sync')">ğŸ¬ Video Sync</button>
      <button class="tab-button" onclick="switchTab('t2v')">ğŸ¥ Text to Video</button>
      <button class="tab-button" onclick="switchTab('t2v-io')">ğŸ¬ T2V IO</button>
      <button class="tab-button" onclick="switchTab('settings')">âš™ï¸ Settings</button>
    </div>

    <!-- TTS GENAI Tab -->
    <div id="tts-genai-tab" class="tab-content active">
      <div class="section">
        <h2>ğŸŒ GENAI Text to Speech</h2>
        
        <!-- GENAI Configuration -->
        <div class="config-header" onclick="toggleConfig('genai')" style="cursor: pointer; display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 8px; margin-bottom: 15px;">
          <h3 style="margin: 0; color: white; font-size: 1.1rem;">âš™ï¸ GENAI Configuration</h3>
          <span id="genai-config-toggle" style="font-size: 1.2rem;">â–¼</span>
        </div>
        
        <div id="genai-config-section" class="tts-config-grid">
          <div class="form-group">
            <label>API Type:</label>
            <select id="genai-api-type" onchange="updateGenaiApiTypeInfo(); autoSaveSettings()">
              <option value="labs">Labs (ElevenLabs)</option>
              <option value="max">Max (Custom Voice)</option>
            </select>
            <small id="genai-api-type-info">Labs: voice_id chuáº©n ElevenLabs</small>
          </div>

          <div class="form-group">
            <label>API Key (Bearer Token):</label>
            <input type="password" id="genai-api-key" placeholder="Enter GENAI API key" onblur="autoSaveSettings()">
          </div>

          <div class="form-group">
            <label>Voice ID:</label>
            <input type="text" id="genai-voice-id" placeholder="j210dv0vWm7fCknyQpbA" onblur="autoSaveSettings()">
          </div>

          <div class="form-group">
            <label>Model:</label>
            <input type="text" id="genai-model" placeholder="eleven_multilingual_v2 or speech-2.5-hd-preview" onblur="autoSaveSettings()">
            <small>Model name for the selected API type</small>
          </div>

          <div class="form-group">
            <label>Output Directory:</label>
            <div style="display: flex; gap: 8px;">
              <input type="text" id="genai-output-dir" placeholder="Select directory" readonly style="flex: 1;">
              <button onclick="selectOutputDir('genai')" style="margin: 0; padding: 12px 16px;">Browse</button>
            </div>
          </div>

          <div class="form-group">
            <label>Language:</label>
            <select id="genai-language" onchange="autoSaveSettings()">
              <option value="vi">Tiáº¿ng Viá»‡t</option>
              <option value="en">English</option>
              <option value="ja">æ—¥æœ¬èª</option>
              <option value="zh">ä¸­æ–‡</option>
              <option value="ko">í•œêµ­ì–´</option>
            </select>
          </div>

          <div class="form-group" id="genai-srt-download-group">
            <label style="margin: 0; display: flex; align-items: center; gap: 8px;">
              <input type="checkbox" id="genai-download-srt" onchange="updateMergeSrtVisibility('genai')" style="margin: 0;">
              <span>Download SRT Files</span>
            </label>
            <small>Generate subtitle files (Labs only)</small>
          </div>

          <div class="form-group" style="grid-column: 1 / -1;">
            <label>Ngrok URL:</label>
            <div style="display: flex; gap: 8px;">
              <input type="text" id="genai-ngrok-url" placeholder="https://xxxxx.ngrok-free.app" onblur="autoSaveSettings()" style="flex: 1;">
              <button onclick="startCallbackServer()" style="margin: 0; padding: 12px 16px;">Start Server</button>
              <span id="server-status" class="status" style="margin-left: 8px; align-self: center;"></span>
            </div>
          </div>
        </div>
        
        <!-- Text Input -->
        <h3 style="margin-top: 20px; color: #6c5ce7; border-bottom: 2px solid #6c5ce7; padding-bottom: 5px;">ğŸ“ Text Content</h3>
        
        <div class="form-group">
          <textarea id="genai-text-content" rows="8" placeholder="Enter your text here. It will be split into sentences automatically based on the selected language."></textarea>
        </div>

        <div class="button-group">
          <button id="genai-start-btn" class="primary-button" onclick="startTTSProcessing('genai')">ğŸ¤ï¸ Generate TTS</button>
          <button id="genai-stop-btn" class="danger-button" onclick="stopTTSProcessing('genai')" style="display: none;">â¹ï¸ Stop TTS</button>
          <button class="secondary-button" onclick="previewSentences('genai')">ğŸ” Preview Sentences</button>
          <button class="secondary-button" onclick="checkMissingFiles('genai')">ğŸ” Check Missing MP3</button>
          <button id="genai-check-srt-btn" class="secondary-button" onclick="checkMissingSrt('genai')" style="display: none;">ğŸ“‹ Check Missing SRT</button>
          <button id="genai-merge-srt-btn" class="secondary-button" onclick="mergeSrtFiles('genai')" style="display: none;">ğŸ“‹ Merge SRT Files</button>
          <button class="secondary-button" onclick="joinVoices('genai')">ğŸµ Join Voices</button>
          <button class="secondary-button" onclick="clearTTSForm('genai')">Clear</button>
        </div>

        <div id="genai-missing-files-section" class="missing-files-section" style="display: none;">
          <h3>Missing Files Report</h3>
          <div id="genai-missing-files-summary" class="summary-box"></div>
          <div id="genai-missing-files-details" class="details-box"></div>
          <div class="button-group" style="margin-top: 15px;">
            <button id="genai-retry-mp3-btn" class="primary-button" onclick="retryMissingVoices('genai')" style="display: none;">ğŸ”„ Retry Missing Voices</button>
            <button id="genai-retry-srt-btn" class="primary-button" onclick="retryMissingSrt('genai')" style="display: none;">ğŸ”„ Retry Missing SRT</button>
            <button class="secondary-button" onclick="hideMissingFilesSection('genai')">Close</button>
          </div>
        </div>

        <div id="genai-progress" class="progress-section">
          <h3>Progress</h3>
          <div class="progress-bar">
            <div id="genai-progress-bar" class="progress-fill"></div>
          </div>
          <div id="genai-log" class="log-output"></div>
        </div>
      </div>
    </div>

    <!-- TTS AI33 Tab -->
    <div id="tts-ai33-tab" class="tab-content">
      <div class="section">
        <h2>ğŸ¤– AI33 Text to Speech</h2>
        
        <!-- AI33 Configuration -->
        <div class="config-header" onclick="toggleConfig('ai33')" style="cursor: pointer; display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; border-radius: 8px; margin-bottom: 15px;">
          <h3 style="margin: 0; color: white; font-size: 1.1rem;">âš™ï¸ AI33 Configuration</h3>
          <span id="ai33-config-toggle" style="font-size: 1.2rem;">â–¼</span>
        </div>
        
        <div id="ai33-config-section" class="tts-config-grid">
          <div class="form-group">
            <label>API Type:</label>
            <select id="ai33-api-type" onchange="updateAi33ApiTypeInfo(); autoSaveSettings()">
              <option value="labs">Labs (ElevenLabs)</option>
              <option value="max">Max (Custom Voice)</option>
            </select>
            <small id="ai33-api-type-info">Labs: voice_id chuáº©n ElevenLabs</small>
          </div>

          <div class="form-group">
            <label>API Key (xi-api-key):</label>
            <input type="password" id="ai33-api-key" placeholder="Enter AI33 API key" onblur="autoSaveSettings()">
          </div>

          <div class="form-group">
            <label>Voice ID:</label>
            <input type="text" id="ai33-voice-id" placeholder="j210dv0vWm7fCknyQpbA" onblur="autoSaveSettings()">
          </div>

          <div class="form-group">
            <label>Model:</label>
            <input type="text" id="ai33-model" placeholder="eleven_multilingual_v2 or speech-2.5-hd-preview" onblur="autoSaveSettings()">
            <small>Model name for the selected API type</small>
          </div>

          <div class="form-group">
            <label>Output Directory:</label>
            <div style="display: flex; gap: 8px;">
              <input type="text" id="ai33-output-dir" placeholder="Select directory" readonly style="flex: 1;">
              <button onclick="selectOutputDir('ai33')" style="margin: 0; padding: 12px 16px;">Browse</button>
            </div>
          </div>

          <div class="form-group">
            <label>Language:</label>
            <select id="ai33-language" onchange="autoSaveSettings()">
              <option value="vi">Tiáº¿ng Viá»‡t</option>
              <option value="en">English</option>
              <option value="ja">æ—¥æœ¬èª</option>
              <option value="zh">ä¸­æ–‡</option>
              <option value="ko">í•œêµ­ì–´</option>
            </select>
          </div>

          <div class="form-group" style="grid-column: 1 / -1;">
            <label>Ngrok URL:</label>
            <div style="display: flex; gap: 8px;">
              <input type="text" id="ai33-ngrok-url" placeholder="https://xxxxx.ngrok-free.app" onblur="autoSaveSettings()" style="flex: 1;">
              <button onclick="startCallbackServer()" style="margin: 0; padding: 12px 16px;">Start Server</button>
              <span id="server-status" class="status" style="margin-left: 8px; align-self: center;"></span>
            </div>
          </div>
        </div>
        
        <!-- Text Input -->
        <h3 style="margin-top: 20px; color: #f5576c; border-bottom: 2px solid #f5576c; padding-bottom: 5px;">ğŸ“ Text Content</h3>
        
        <div class="form-group">
          <textarea id="ai33-text-content" rows="8" placeholder="Enter your text here. It will be split into sentences automatically based on the selected language."></textarea>
        </div>

        <div class="button-group">
          <button id="ai33-start-btn" class="primary-button" onclick="startTTSProcessing('ai33')">ğŸ¤ï¸ Generate TTS</button>
          <button id="ai33-stop-btn" class="danger-button" onclick="stopTTSProcessing('ai33')" style="display: none;">â¹ï¸ Stop TTS</button>
          <button class="secondary-button" onclick="previewSentences('ai33')">ğŸ” Preview Sentences</button>
          <button class="secondary-button" onclick="checkMissingFiles('ai33')">ğŸ” Check Missing Files</button>
          <button class="secondary-button" onclick="joinVoices('ai33')">ğŸµ Join Voices</button>
          <button class="secondary-button" onclick="clearTTSForm('ai33')">Clear</button>
        </div>

        <div id="ai33-missing-files-section" class="missing-files-section" style="display: none;">
          <h3>Missing Files Report</h3>
          <div id="ai33-missing-files-summary" class="summary-box"></div>
          <div id="ai33-missing-files-details" class="details-box"></div>
          <div class="button-group" style="margin-top: 15px;">
            <button id="ai33-retry-mp3-btn" class="primary-button" onclick="retryMissingVoices('ai33')" style="display: none;">ğŸ”„ Retry Missing Voices</button>
            <button class="secondary-button" onclick="hideMissingFilesSection('ai33')">Close</button>
          </div>
        </div>

        <div id="ai33-progress" class="progress-section">
          <h3>Progress</h3>
          <div class="progress-bar">
            <div id="ai33-progress-bar" class="progress-fill"></div>
          </div>
          <div id="ai33-log" class="log-output"></div>
        </div>
      </div>
    </div>

    <!-- Preview Sentences Modal (Shared) -->
    <div id="preview-sentences-modal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h3>âœ‚ï¸ Preview Split Sentences</h3>
          <button class="close-button" onclick="closePreviewModal()">&times;</button>
        </div>
        <div class="modal-body">
          <div id="preview-info" style="margin-bottom: 15px; padding: 10px; background: #e3f2fd; border-radius: 6px; color: #1976d2;">
            <strong>Total Sentences:</strong> <span id="preview-count">0</span> | 
            <strong>Language:</strong> <span id="preview-language">-</span>
          </div>
          <div id="preview-sentences-list" class="sentences-list"></div>
        </div>
        <div class="modal-footer">
          <button class="primary-button" onclick="copySentencesToClipboard()">ğŸ“‹ Copy All</button>
          <button class="primary-button" onclick="exportSentencesToFile()">ğŸ’¾ Export to File</button>
          <button class="secondary-button" onclick="closePreviewModal()">Close</button>
        </div>
      </div>
    </div>

    <!-- Video Sync Tab -->
    <div id="sync-tab" class="tab-content">
      <div class="section">
        <h2>Video Synchronization</h2>
        
        <!-- Sync Configuration -->
        <div class="config-header" onclick="toggleSyncConfig()" style="cursor: pointer; display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 8px; margin-bottom: 15px;">
          <h3 style="margin: 0; color: white; font-size: 1.1rem;">âš™ï¸ Sync Configuration</h3>
          <span id="sync-config-toggle" style="font-size: 1.2rem;">â–¼</span>
        </div>
        
        <div id="sync-config-section" class="sync-config-grid">
          <div class="form-group">
            <label>Voice Directory:</label>
            <div style="display: flex; gap: 8px;">
              <input type="text" id="voice-dir" placeholder="Contains .mp3 files" readonly style="flex: 1;">
              <button onclick="selectVoiceDir()" style="margin: 0; padding: 12px 16px;">Browse</button>
            </div>
          </div>

          <div class="form-group">
            <label>Video Directory:</label>
            <div style="display: flex; gap: 8px;">
              <input type="text" id="video-dir" placeholder="Contains .mp4 files" readonly style="flex: 1;">
              <button onclick="selectVideoDir()" style="margin: 0; padding: 12px 16px;">Browse</button>
            </div>
          </div>

          <div class="form-group">
            <label>Output Directory:</label>
            <div style="display: flex; gap: 8px;">
              <input type="text" id="sync-output-dir" placeholder="Select output directory" readonly style="flex: 1;">
              <button onclick="selectSyncOutputDir()" style="margin: 0; padding: 12px 16px;">Browse</button>
            </div>
          </div>

          <div class="form-group">
            <label>Prompts File (Optional):</label>
            <div style="display: flex; gap: 8px;">
              <input type="text" id="prompts-file" placeholder="scenes.txt for missing video logs" readonly style="flex: 1;">
              <button onclick="selectPromptsFile()" style="margin: 0; padding: 12px 16px;">Browse</button>
            </div>
          </div>

          <div class="form-group">
            <label>Hardware Acceleration:</label>
            <select id="hw-accel" onchange="updateHwAccel()">
              <option value="cpu">CPU Only</option>
              <option value="gpu">GPU (NVIDIA NVENC)</option>
              <option value="both">CPU + GPU (Hybrid)</option>
            </select>
            <small>RTX 4060 âœ“ NVENC</small>
          </div>

          <div class="form-group" style="display: flex; align-items: center;">
            <label style="margin: 0; display: flex; align-items: center; gap: 8px;">
              <input type="checkbox" id="force-reprocess" style="margin: 0;">
              <span>Force Reprocess All</span>
            </label>
          </div>
        </div>

        <div class="button-group">
          <button class="primary-button" onclick="startVideoSync()">ğŸ¬ Sync Videos</button>
          <button class="secondary-button" onclick="checkMissingVideos()">ğŸ” Check Missing Videos</button>
          <button class="secondary-button" onclick="clearSyncForm()">Clear</button>
        </div>

        <div id="missing-videos-section" class="missing-files-section" style="display: none;">
          <h3>Missing Videos Report</h3>
          <div id="missing-videos-summary" class="summary-box"></div>
          <div id="missing-videos-details" class="details-box"></div>
          <div class="button-group" style="margin-top: 15px;">
            <button class="primary-button" onclick="retryMissingVideos()">ğŸ”„ Retry Missing Videos</button>
            <button class="secondary-button" onclick="hideMissingVideosSection()">Close</button>
          </div>
        </div>

        <div id="sync-progress" class="progress-section">
          <h3>Progress</h3>
          <div class="progress-bar">
            <div id="sync-progress-bar" class="progress-fill"></div>
          </div>
          <div id="sync-log" class="log-output"></div>
        </div>
      </div>
    </div>

    <!-- Text to Video Tab -->
    <div id="t2v-tab" class="tab-content">
      <div class="section">
        <h2>Text to Video Generation</h2>
        
        <!-- T2V Configuration -->
        <div class="config-header" onclick="toggleT2VConfig()" style="cursor: pointer; display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 8px; margin-bottom: 15px;">
          <h3 style="margin: 0; color: white; font-size: 1.1rem;">âš™ï¸ T2V Configuration</h3>
          <span id="t2v-config-toggle" style="font-size: 1.2rem;">â–¼</span>
        </div>
        
        <div id="t2v-config-section" class="t2v-config-grid">
          <div class="form-group">
            <label>Base URL:</label>
            <input type="text" id="t2v-base-url" placeholder="https://veoultra.click" value="https://veoultra.click" onblur="autoSaveSettings()">
          </div>

          <div class="form-group">
            <label>API Key:</label>
            <input type="password" id="t2v-api-key" placeholder="Enter API key" onblur="autoSaveSettings()">
          </div>

          <div class="form-group">
            <label>Output Directory:</label>
            <div style="display: flex; gap: 8px;">
              <input type="text" id="t2v-output-dir" placeholder="Select directory" readonly style="flex: 1;">
              <button onclick="selectT2VOutputDir()" style="margin: 0; padding: 12px 16px;">Browse</button>
            </div>
          </div>

          <div class="form-group">
            <label>Aspect Ratio:</label>
            <select id="t2v-aspect-ratio" onchange="autoSaveSettings()">
              <option value="VIDEO_ASPECT_RATIO_LANDSCAPE">Landscape (16:9)</option>
              <option value="VIDEO_ASPECT_RATIO_PORTRAIT">Portrait (9:16)</option>
            </select>
          </div>
        </div>

        <!-- Account Management -->
        <h3 style="margin-top: 20px; color: #6c5ce7; border-bottom: 2px solid #6c5ce7; padding-bottom: 5px;">ğŸ‘¥ Account Management</h3>
        
        <div class="form-group" style="display: flex; gap: 10px; align-items: flex-end;">
          <div style="flex: 1;">
            <label>Account Name:</label>
            <input type="text" id="new-account-name" placeholder="e.g., account1" />
          </div>
          <button class="primary-button" onclick="addT2VAccount()" style="margin: 0; padding: 12px 24px;">â• Add Account</button>
        </div>

        <div id="t2v-accounts-list" class="accounts-list">
          <!-- Accounts will be added here dynamically -->
        </div>

        <!-- Prompts Input -->
        <h3 style="margin-top: 20px; color: #6c5ce7; border-bottom: 2px solid #6c5ce7; padding-bottom: 5px;">ğŸ“ Prompts</h3>
        
        <div class="form-group">
          <textarea id="t2v-prompts" rows="10" placeholder="Enter prompts (one per line)&#10;Example:&#10;A beautiful sunset over the ocean&#10;A cat playing with a ball&#10;A busy city street at night"></textarea>
        </div>

        <div class="button-group">
          <button id="start-t2v-btn" class="primary-button" onclick="startT2VProcessing()">ğŸ¥ Generate Videos</button>
          <button id="stop-t2v-btn" class="danger-button" onclick="stopT2VProcessing()" style="display: none;">â¹ï¸ Stop Generation</button>
          <button class="secondary-button" onclick="downloadGeneratedVideos()">ğŸ“¥ Download Generated Videos</button>
          <button class="secondary-button" onclick="downloadCompletedVideos()">ğŸ“¥ Download All Videos</button>
          <button class="secondary-button" onclick="clearT2VForm()">Clear</button>
        </div>

        <!-- Processing Status -->
        <div id="t2v-status" class="t2v-status" style="display: none;">
          <h3>Processing Status</h3>
          <div id="t2v-accounts-status" class="accounts-status">
            <!-- Account status cards will be added here -->
          </div>
        </div>

        <!-- Failed Prompts Section -->
        <div id="t2v-failed-section" class="missing-files-section" style="display: none;">
          <h3>Failed Prompts</h3>
          <div id="t2v-failed-summary" class="summary-box"></div>
          <div id="t2v-failed-list" class="failed-prompts-list">
            <!-- Failed prompts will be listed here -->
          </div>
          <div class="button-group" style="margin-top: 15px;">
            <button class="primary-button" onclick="retryFailedPrompts()">ğŸ”„ Retry Failed Prompts</button>
            <button class="secondary-button" onclick="hideFailedPromptsSection()">Close</button>
          </div>
        </div>

        <div id="t2v-progress" class="progress-section">
          <h3>Progress</h3>
          <div class="progress-bar">
            <div id="t2v-progress-bar" class="progress-fill"></div>
          </div>
          <div id="t2v-log" class="log-output"></div>
        </div>
      </div>
    </div>

    <!-- Text-to-Video IO Tab -->
    <div id="t2v-io-tab" class="tab-content">
      <div class="section">
        <h2>ğŸ¬ Text-to-Video IO (Single Stream)</h2>
        
        <!-- T2V IO Configuration -->
        <div class="config-header" onclick="toggleT2VIOConfig()" style="cursor: pointer; display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 8px; margin-bottom: 15px;">
          <h3 style="margin: 0; color: white; font-size: 1.1rem;">âš™ï¸ T2V IO Configuration</h3>
          <span id="t2v-io-config-toggle" style="font-size: 1.2rem;">â–¼</span>
        </div>
        
        <div id="t2v-io-config-section" class="t2v-config-grid">
          <div class="form-group">
            <label>Base URL:</label>
            <input type="text" id="t2v-io-base-url" placeholder="https://api.example.com" onblur="autoSaveSettings()">
          </div>

          <div class="form-group">
            <label>API Key:</label>
            <input type="password" id="t2v-io-api-key" placeholder="Enter API key" onblur="autoSaveSettings()">
          </div>

          <div class="form-group">
            <label>Output Directory:</label>
            <div style="display: flex; gap: 8px;">
              <input type="text" id="t2v-io-output-dir" placeholder="Select directory" readonly style="flex: 1;">
              <button onclick="selectT2VIOOutputDir()" style="margin: 0; padding: 12px 16px;">Browse</button>
            </div>
          </div>

          <div class="form-group">
            <label>Aspect Ratio:</label>
            <select id="t2v-io-aspect-ratio" onchange="autoSaveSettings()">
              <option value="VIDEO_ASPECT_RATIO_LANDSCAPE">Landscape (16:9)</option>
              <option value="VIDEO_ASPECT_RATIO_PORTRAIT">Portrait (9:16)</option>
            </select>
          </div>

          <div class="form-group">
            <label>Concurrent Tasks (Sá»‘ luá»“ng xá»­ lÃ½):</label>
            <input type="number" id="t2v-io-concurrent" value="3" min="1" onblur="autoSaveSettings()">
            <small>Sá»‘ lÆ°á»£ng videos Ä‘Æ°á»£c táº¡o Ä‘á»“ng thá»i (máº·c Ä‘á»‹nh: 3)</small>
          </div>

          <div class="form-group">
            <label>Task Delay (ms):</label>
            <input type="number" id="t2v-io-delay" value="1000" min="0" step="100" onblur="autoSaveSettings()">
            <small>Thá»i gian chá» giá»¯a cÃ¡c láº§n gá»i API (máº·c Ä‘á»‹nh: 1000ms)</small>
          </div>

          <div class="form-group">
            <label>Max Auto Retries:</label>
            <input type="number" id="t2v-io-max-retries" value="2" min="0" max="5" onblur="autoSaveSettings()">
            <small>Sá»‘ láº§n tá»± Ä‘á»™ng retry khi cÃ³ lá»—i (0-5, máº·c Ä‘á»‹nh: 2)</small>
          </div>
        </div>

        <!-- Prompts Input -->
        <h3 style="margin-top: 20px; color: #6c5ce7; border-bottom: 2px solid #6c5ce7; padding-bottom: 5px;">ğŸ“ Prompts</h3>
        
        <div class="form-group">
          <textarea id="t2v-io-prompts" rows="10" placeholder="Enter prompts (one per line)&#10;Example:&#10;A beautiful sunset over the ocean&#10;A cat playing with a ball&#10;A busy city street at night"></textarea>
        </div>

        <div class="button-group">
          <button id="start-t2v-io-btn" class="primary-button" onclick="startT2VIOProcessing()">ğŸ¥ Generate Videos</button>
          <button id="stop-t2v-io-btn" class="danger-button" onclick="stopT2VIOProcessing()" style="display: none;">â¹ï¸ Stop Generation</button>
          <button class="secondary-button" onclick="checkT2VIOMissingPrompts()">ğŸ” Check Missing</button>
          <button class="secondary-button" onclick="showT2VIOEditPromptsModal()">âœï¸ Edit Prompts</button>
          <button class="secondary-button" onclick="exportT2VIOPrompts()">ğŸ’¾ Export Prompts</button>
          <button class="secondary-button" onclick="importT2VIOPrompts()">ğŸ“‚ Import Prompts</button>
          <button class="secondary-button" onclick="clearT2VIOForm()">Clear</button>
        </div>

        <!-- Prompts Status Section -->
        <div id="t2v-io-status" class="t2v-status" style="display: none;">
          <h3>Prompts Status</h3>
          <div id="t2v-io-prompts-status" class="prompts-status">
            <!-- Prompt status cards will be added here -->
          </div>
        </div>

        <!-- Progress Section -->
        <div id="t2v-io-progress" class="progress-section">
          <h3>Progress</h3>
          <div class="progress-stats" style="display: flex; gap: 20px; margin-bottom: 15px;">
            <div><strong>Total:</strong> <span id="t2v-io-total">0</span></div>
            <div><strong>Completed:</strong> <span id="t2v-io-completed">0</span></div>
            <div><strong>Failed:</strong> <span id="t2v-io-failed">0</span></div>
            <div><strong>Processing:</strong> <span id="t2v-io-processing">0</span></div>
          </div>
          <div class="progress-bar">
            <div id="t2v-io-progress-bar" class="progress-fill"></div>
          </div>
          <div id="t2v-io-log" class="log-output"></div>
        </div>

        <!-- Failed Prompts Section -->
        <div id="t2v-io-failed-section" class="missing-files-section" style="display: none;">
          <h3>Failed Prompts</h3>
          <div id="t2v-io-failed-summary" class="summary-box"></div>
          <div id="t2v-io-failed-list" class="failed-prompts-list"></div>
          <div class="button-group" style="margin-top: 15px;">
            <button class="primary-button" onclick="retryT2VIOFailedPrompts()">ğŸ”„ Retry Failed Prompts</button>
            <button class="secondary-button" onclick="hideT2VIOFailedSection()">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Settings Tab -->
    <div id="settings-tab" class="tab-content">
      <div class="section">
        <h2>Application Settings</h2>
        
        <!-- General Settings -->
        <h3 style="margin-top: 20px; color: #6c5ce7; border-bottom: 2px solid #6c5ce7; padding-bottom: 5px;">âš™ï¸ General Settings</h3>
        
        <div class="form-group">
          <label>Callback Server Port:</label>
          <input type="number" id="callback-port" value="9999">
        </div>

        <div class="form-group">
          <label>Callback Server Host:</label>
          <input type="text" id="callback-host" value="localhost">
        </div>

        <div class="form-group">
          <label>TTS Batch Size (sá»‘ lÆ°á»£ng request song song):</label>
          <input type="number" id="batch-size" value="15" min="1" max="20">
          <small>Sá»‘ lÆ°á»£ng TTS requests Ä‘Æ°á»£c gá»­i Ä‘á»“ng thá»i (1-20, máº·c Ä‘á»‹nh: 15)</small>
        </div>

        <div class="form-group">
          <label>T2V Batch Size (sá»‘ lÆ°á»£ng video/account):</label>
          <input type="number" id="t2v-batch-size" value="5" min="1" max="10">
          <small>Sá»‘ lÆ°á»£ng videos Ä‘Æ°á»£c táº¡o Ä‘á»“ng thá»i cho má»—i account (1-10, máº·c Ä‘á»‹nh: 5)</small>
        </div>

        <div class="form-group">
          <label>T2V Max Auto Retries:</label>
          <input type="number" id="t2v-max-retries" value="2" min="0" max="5">
          <small>Sá»‘ láº§n tá»± Ä‘á»™ng retry khi cÃ³ lá»—i (0-5, máº·c Ä‘á»‹nh: 2)</small>
        </div>

        <div class="form-group">
          <label>T2V Task Delay (ms):</label>
          <input type="number" id="t2v-task-delay" value="500" min="0" max="5000" step="100">
          <small>Thá»i gian chá» giá»¯a cÃ¡c task (0-5000ms, máº·c Ä‘á»‹nh: 500ms)</small>
        </div>

        <div class="form-group">
          <label>Max Retries:</label>
          <input type="number" id="max-retries" value="1" min="0" max="5">
        </div>

        <div class="button-group">
          <button class="primary-button" onclick="saveSettings()">ğŸ’¾ Save Settings</button>
          <button class="secondary-button" onclick="loadSettings()">ğŸ”„ Load Settings</button>
        </div>

        <div id="settings-status" class="status-message"></div>
      </div>
    </div>
  </div>

  <!-- T2V IO Edit Prompts Modal -->
  <div id="t2v-io-edit-modal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 800px;">
      <div class="modal-header">
        <h3>âœï¸ Edit T2V IO Prompts</h3>
        <button class="close-btn" onclick="closeT2VIOEditModal()">Ã—</button>
      </div>
      <div class="modal-body">
        <div id="t2v-io-edit-list" class="edit-prompts-list"></div>
      </div>
      <div class="modal-footer">
        <button class="secondary-button" onclick="closeT2VIOEditModal()">âŒ Cancel</button>
        <button class="primary-button" onclick="saveT2VIOEditedPrompts()">âœ… Save Changes</button>
      </div>
    </div>
  </div>

  <!-- Replace Account Modal -->
  <div id="replace-account-modal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 500px;">
      <div class="modal-header">
        <h3>ğŸ”„ Replace Account</h3>
        <button class="close-btn" onclick="closeReplaceAccountModal()">Ã—</button>
      </div>
      <div class="modal-body">
        <p id="replace-account-info" style="margin-bottom: 15px;"></p>
        <div class="form-group">
          <label>Select target account:</label>
          <select id="replace-account-select" style="width: 100%; padding: 10px; font-size: 1rem; border: 1px solid #ddd; border-radius: 4px;">
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="secondary-button" onclick="closeReplaceAccountModal()">âŒ Cancel</button>
        <button class="primary-button" onclick="confirmReplaceAccount()">âœ… Replace</button>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
